apiVersion: apps/v1
kind: Deployment
metadata:
  name: license
  namespace: grassroot
spec:
  selector:
    matchLabels:
      app: license
  replicas: 1
  template:
    metadata:
      labels:
        app: license
    spec:
      containers:
        - name: license
          image: registry.gitlab.com/target-digital-transformation/devops/tespkg/license-manager:1.7.14-oia-mixedmanual
          command:
            - license-manager
            - serve
            - --address=:16000
            - --dsn=postgres://postgres:password@postgres.infra/license?sslmode=disable
            - --oidc=http://dex.grassroot.svc.cluster.local:5556
            - --db-migration-path=/usr/local/pg/migration
            - --issuer-secret=Vu_dWiaMOJFkvqM0mKFgpjNWkG7eGQ6REKtPbO9_QQENud5IGWDsMgG1mgI2BJkfmNTxDLBVhWW_ByAC3xcwdRfy0UIcdsopVNj7qOdg9A1dTpoceRJL4LAxk_DqQi6cowGTFydTqqv1_nPH7AYVsSnHOh4Gbqy-1Gg3-APS9hGGOUbiobLLHuYtJE5ikfvcW2d5zH_wBSw1ZngMeJ5TIgKGFX0Ns1S_JVob_nS5AnogqyeePUHS3dNqex_VSmENfwSmb3hvNmR_8Wm5VLhxgdvLDwDl35FmfjillSYZJgQSJ83hQp3MwGn_ziJwPCxvrLDDO-1nNePmdJlrsrR7jNGPDWOoXnhXfPS8sx1uhTiZ2g_DqCdLYTCufa6aMl7FYmIFBssqFjwd2gExYzpF_6iDw9VVpomUAroYt9iuZPzeA7b7OwvqnqUS5i9-K1P74-m--pGrN6El54p0Ze4OETTYD_PhNurqER695rP4LNIG1Lo_P8yX2aLeTRWzKfmOC5JO0r9qZVT0vES4hhE_2Vb3IJ71UJ9SCnyQzyRdS8RQbn1enAScAxHzdUR8pAiRBsODcrNwXILqx3Pi4Afn0tmau4j2El8CL9OY_rnduBqDpvRV9fj16KHtktL9_hfInYRfeL3OloLPoOZrA7HMXqWMhhUJG4IMCJjZBLMYdCxgwm3INI3MjyCZ8iF3cqd_97U7m1bUcP2Vw49jYIsD5dAlneZZMkDM1VDguGyw8x0wIrHoljVRWMId8yoEBEb_x4wZzffYxqU5pYCK_2u0i0FRO8bbTinH0riULzm2eXFKaHSPWpjYFWaDJv9RhTDrCm3f1D_X_OfQFwgNKnRW9tth7S1w9Yau1AdKG8DCSzbgkc2MdnquV6VNK_j_TZo0442vVPGlGLgpMMbUTHp3qgAxvlPSOPrcMqNleRfWl-te3KK0FddXYrrLDQAgSKTaokhkY3NwEl_2W47Gul12Jg-uSWDOvFMWocwZrugFr3t0eHxjt3TsFZhKp3npHY7JsqOqWSF5ighS4UeMVWmlAxUro920eap99n5LCJnS1a-q3jBTE1Mcf5h5_LsL3yYXo6_aHPpc5zuG91Yfj0Uyw9uKd4LDXOdwYtLUFyqMoj9-h9WD33F_D0emDnmMCR80JYeE9wlyLRgIQf0oteSjHRgw_FSOnZaQ4dZLdx3PCeAZFjfxxufQcS2MohRJaUHvjwRIXITAuN10cGbyhzxjqh2h0th2U_FlPD97JS1EwbHGCpxQpC_cLl6eKV-Iq5Qo8_O4epDcxUKTkT56R7IcOdh0uxfFYdMSTOQdk5fAa3N83G9IZwyz_tj3CkcJ29CR8v0cWQeJJqdiIGxbrjv-n-Mm0GZ5B_hfbE7mTMnN3p_6zVqpGfPrAaxKYlZTkUAfcGKpduzQjIRrEAPR7YTgvF-OyRutrTVQbZ79gNT94Mbs1cIvI5f0Iqfkd1havjYqtd0A3KjTB8LyL78E_BADwRCDfnpWGJnltXQXV5GRKTQOIhLazRIKvMi3hr7EThCVBaLKBBq3aqzp4_j20gVieZeInl2r1ZVQgtwzU5pZI0xEGCThksCyz4kWbh27P7wLkDjTL3Iv62ZvKFNMKwiV2Pv6HJNsNJwJqsKkle_0dUiPOe59NJHhdueiYsTfHBCSyBdtlXyWzZp-VEAbFR5bi_zuktUP_wlSRpU_gs6SGGa_QQsfbSnm9JOx67eMx1UjT7zxqfwpr1TuU_L3FVlSgi2ORUhL53IrGbFPZmJCRc8kqL50HDLKmv6CmyxwrZ90JWtpabwjwigfxAS0ZnK8JUfy_PcQh3CeFrYZW41lHuAfxdvqRbrR-hD7HE4GCoCutYrhCEWIMUUco_x15Rvf2sSoZEigOVUZ4z6zEZljIRZfDKTlQFeLJ1zqFQ9xPoPuQIw3_M0mxa0AuNkB9rw9AUIQRwovInI3M9XjM_BgBX0jv0Zf6oXIH42dDVUSiOBx6_iF6odCUf-Yvwt8DbQD42bGJX-81UKdclOL1rGWkOx8sr4lyCVCUxGo9BrbN1XlN1jOczMEmontW5305LAuT3Zqfe9ekaIQB9n2OUWXdujvfGB7EP5yCgqpHKS_l8xciE_MtWwZaphzPayCjLNhJWIFj5cgXHjpaH0EQSTbtiP5eHnDBKPHoQWNe9pIYqSI2Ug-sBH47eCJ9LHAAqA8UedtUe2XjXYrv_drYcZNG_M
            - --license=ZXlKaGJHY2lPaUpTVXpJMU5pSXNJbXRwWkNJNkltWmlZemswWVRRek5tUXpZakpqWlRFNU9HTmlZemd6TmpRM05tRXhNV0U0TlRVell6ZzBaV0lpZlEuZXlKMlpYSnphVzl1SWpvaWRqRXVNQzR3SWl3aWRIbHdaU0k2TVRBd0xDSnZjbWRoYm1sNllYUnBiMjRpT2lKc2IyTmhiQ0lzSW1WdFlXbHNJam9pYkc5allXeEFaMjFoYVd3dVkyOXRJaXdpWlhod2FYSjVJam94T1RJeU16RXpOakF3TENKcGMzTjFaVjloZENJNk1UY3pOemN3T0RJeE1pd2lZWEJ3Y3lJNlczc2libUZ0WlNJNkluZHZjbXR6Y0dGalpTSXNJbTFoZUY5MWMyVnlJam94TURBc0ltTnZibU4xY25KbGJuUmZkWE5sY2w5MGFXMWxiM1YwSWpvNU1EQjlMSHNpYm1GdFpTSTZJbVpwYkdWekxXMWhibUZuWlcxbGJuUXRaV1JuWlNJc0ltMWhlRjkxYzJWeUlqb3hNREFzSW1OdmJtTjFjbkpsYm5SZmRYTmxjbDkwYVcxbGIzVjBJam81TURCOUxIc2libUZ0WlNJNkluQnliMlpwYkdVaUxDSnRZWGhmZFhObGNpSTZNVEF3TENKamIyNWpkWEp5Wlc1MFgzVnpaWEpmZEdsdFpXOTFkQ0k2T1RBd2ZTeDdJbTVoYldVaU9pSmpiMjVtYVdkMWNtRjBiM0lpTENKdFlYaGZkWE5sY2lJNk1UQXdMQ0pqYjI1amRYSnlaVzUwWDNWelpYSmZkR2x0Wlc5MWRDSTZPVEF3ZlYwc0ltUmxjR3h2ZVY5dFpYUm9iMlFpT2pKOS5HTHJJR0dLZUo4a1VjS1EtZDhUX3JEVVU0THlvWGI5V1JtWHh3OEItWUxkdDBudFZ6SEdzREljbVpJNEEyLWpPRmtOODVueVBrUkJFN1VTa1lMNEQ5ZEdOVWhzMmRTVDJuRlI2c3ZDeVM3aTVDcUxvdUNOYzczbE1FQ3d6Rks1R05rdjVoSktiNURlSF9Ud21weDBPM2Jlel9PR2QzY3R6UGtJbTlmWFJ2NGZQMGU3cXphR05LQjdkeVB6dEtqSFd6OXd1bm40U3BWcW84QjM5X0R0dTdIeEhla3BrRnV1TEJ5NnlBbjZNRE5Bc1VKUkFMMmwydmZKX21BOUdaeUZzdlpNRVhodDBZUjdlRFMzc3V0U2ExSXVVSHc2SmM4VGpVNWI2d1IwT0twc203S2JFQzBlLTYwVkxSRVVtejNoNDRoNEFRSzNoR3F1a3BZa3poajZGWVE.WmpGeTZRNHE4ZUdVb0MzUW1ERVl3Y1h5Skx5TW1JWGVPb3FkVlU2WVYzUEtxZ2pwTWZUeXh6c21mVFZUemM1eEN6bmUwR3pqY09lNktmRFNiYUNJWEVORUlJZkFSWkotVzAxX21IcEVIbG5IdWNwUExURWZ0aVFsLWtQODBIa3hzRjByQk1QOTlmQTRreEM0M2VNRjY1YlZPbWxjc29EbWcxaWlnN1E2UTd3elZoTU5hcUpoM1dfek5NeE1YQkxrMzc1cTZya3JvVlFkTGpudG5WTnhfckhiR0VVdVlrNU54UlM5MGRWR254dWdUR1ZUMTZQa29sTnpDT2Fyc2ZsMHBxRngxTElnekhDNjNfdFZHR2JxRWtOVjlHN21BQjNiOTF4Tkt0SEYtWkhQbUduZWR6dkpqQXhnZ3hkOE5QUEg4MV9Nak9rem1YQ1Y1ZHN2QVNTQUo0TnZrX3NLYnVoLXpLYkFlUHNjdnV3WjVIX2QtSFk3R2FxbktGYTY0bTU0Vmt5eWtEa3NqU0dScnF5VzBGUlhTTE5GdXRvR2dZcHRIRC1oZWcwQmpBZjVyNEgwSmlxMlc2QnZrUDlwQ040YXFOSVpxbE82WVY3d3hNWkNJSUhuTVhubks0RTVoaExuOHR0LXZXVGx3bU1wVHVCbU5KNVBUOXJLbHphWGFSXzVvM1NyMFRVay1aMXdsdFl4ZVJ1dkVSN0pLdGFSa2FSWHhIdnM1Y0tLbEJDYTFjOHVuQ3FsV3hCM2UyV2pJbHF2SkZCWEdGbnV5QXp0QmFXM0s5RGZMSkx3T1N1MFJHbmZsNkNvT3plc1doalh4dHhRX0NNLXVtNVQ4ZkYxelNjcg
            - --log_output_level=debug
          ports:
            - containerPort: 16000
          env:
            - name: TEST
              value: "abc"
      imagePullSecrets:
        - name: registry.gitlab.com
